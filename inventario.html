<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Inventario - Cafetería Cesde</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/inventario-responsive.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* Forzar alineación perfecta de tabla usando CSS Grid */
        .tabla-inventario {
            overflow-x: auto !important;
            margin-bottom: 20px !important;
        }
        .tabla-inventario table {
            width: 100% !important;
            border-collapse: separate !important;
            border-spacing: 0 !important;
            display: table !important;
            table-layout: fixed !important;
        }
        .tabla-inventario thead {
            display: table-header-group !important;
        }
        .tabla-inventario tbody {
            display: table-row-group !important;
        }
        .tabla-inventario tr {
            display: table-row !important;
            height: 60px !important;
            min-height: 60px !important;
            max-height: 60px !important;
        }
        .tabla-inventario td, .tabla-inventario th {
            display: table-cell !important;
            height: 60px !important;
            min-height: 60px !important;
            max-height: 60px !important;
            padding: 15px 8px !important;
            vertical-align: middle !important;
            box-sizing: border-box !important;
            border-bottom: 1px solid #e8ddd4 !important;
            line-height: 1.2 !important;
        }
        .nombre-producto {
            display: block !important;
            height: 100% !important;
            line-height: 1.2 !important;
        }
        .nombre-producto strong {
            display: block !important;
            margin-bottom: 2px !important;
        }
        .nombre-producto small {
            display: block !important;
            font-size: 0.8rem !important;
        }
        .stock-input {
            height: 35px !important;
            width: 70px !important;
            padding: 5px !important;
            text-align: center !important;
            box-sizing: border-box !important;
        }
        .estado-stock {
            display: inline-block !important;
            padding: 5px 10px !important;
            border-radius: 15px !important;
            font-size: 0.75rem !important;
            line-height: 1 !important;
        }
    </style>
</head>
<body>
    <!-- Header con navegación -->
    <header class="header">
        <nav class="nav-container">
            <div class="nav-logo">
                <img src="Images/cafe cesde logo.jpg" alt="Cafetería Cesde" class="logo-img">
                <span class="logo-text">Cafe Cesde</span>
            </div>
            
            <div class="nav-menu">
                <ul class="nav-list">
                    <li><a href="index.html" class="nav-link">🏠 Inicio</a></li>
                    <li><a href="empleados.html" class="nav-link">👨‍💼 Empleados</a></li>
                    <li><a href="notificaciones.html" class="nav-link">🔔 Notificaciones</a></li>
                    <li><a href="soporte.html" class="nav-link">🆘 Soporte</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main class="main-content">
        <!-- Encabezado del Sistema -->
        <section class="page-header">
            <h1>
                <span class="title-icon">📦</span>
                Sistema de Inventario
            </h1>
            <p>Control completo del stock, alertas y movimientos de inventario</p>
        </section>

        <div class="container">
        <!-- Panel de Alertas en Tiempo Real -->
        <div class="panel-alertas">
            <h3>🚨 Alertas de Inventario</h3>
            <div id="alertas-container">
                <!-- Las alertas se cargarán aquí dinámicamente -->
            </div>
        </div>

        <!-- Panel de Reabastecimiento Automático -->
        <div class="panel-reabastecimiento">
            <h3>🚚 Reabastecimiento Automático</h3>
            <div id="reabastecimiento-container">
                <div class="reabastecimiento-status">
                    <div class="status-item">
                        <span class="status-label">Estado:</span>
                        <span id="reabastecimiento-estado" class="status-value">Activo</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Próxima verificación:</span>
                        <span id="proxima-verificacion" class="status-value">--:--</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Último reabastecimiento:</span>
                        <span id="ultimo-reabastecimiento" class="status-value">Sin registros</span>
                    </div>
                </div>
                <div class="reabastecimiento-acciones">
                    <button id="btn-ejecutar-reabastecimiento" class="btn btn-primary">
                        🔄 Ejecutar Reabastecimiento Manual
                    </button>
                    <button id="btn-configurar-reabastecimiento" class="btn btn-secondary">
                        ⚙️ Configurar Parámetros
                    </button>
                </div>
            </div>
        </div>

        <!-- Panel de Control -->
        <div class="panel-control">
            <div class="controles-principales">
                <button id="btn-actualizar-inventario" class="btn btn-primary">
                    🔄 Actualizar Inventario
                </button>
                <button id="btn-generar-reporte" class="btn btn-secondary">
                    📄 Generar Reporte
                </button>
                <button id="btn-exportar-excel" class="btn btn-export">
                    📊 Exportar Excel
                </button>
            </div>

            <!-- Filtros y Búsqueda -->
            <div class="panel-filtros">
                <div class="filtro-grupo">
                    <label for="filtro-categoria">Categoría:</label>
                    <select id="filtro-categoria">
                        <option value="">Todas las categorías</option>
                        <option value="Café">☕ Café</option>
                        <option value="Pastelería">🥐 Pastelería</option>
                        <option value="Desayunos">🍳 Desayunos</option>
                        <option value="Bebidas">🥤 Bebidas</option>
                        <option value="Snacks">🍿 Snacks</option>
                    </select>
                </div>

                <div class="filtro-grupo">
                    <label for="filtro-stock">Estado de Stock:</label>
                    <select id="filtro-stock">
                        <option value="">Todos los estados</option>
                        <option value="agotado">🔴 Agotado</option>
                        <option value="critico">🟠 Crítico</option>
                        <option value="bajo">🟡 Bajo</option>
                        <option value="optimo">🟢 Óptimo</option>
                        <option value="alto">🔵 Alto</option>
                    </select>
                </div>

                <div class="filtro-grupo">
                    <label for="buscador-producto">Buscar Producto:</label>
                    <input type="text" id="buscador-producto" placeholder="Nombre del producto...">
                </div>
            </div>
        </div>

        <!-- Estadísticas del Inventario -->
        <div class="estadisticas-resumen">
            <div class="stat-card">
                <div class="stat-icon">📦</div>
                <div class="stat-info">
                    <span class="stat-number" id="total-productos">0</span>
                    <span class="stat-label">Total Productos</span>
                </div>
            </div>

            <div class="stat-card critico">
                <div class="stat-icon">🚨</div>
                <div class="stat-info">
                    <span class="stat-number" id="productos-agotados">0</span>
                    <span class="stat-label">Agotados</span>
                </div>
            </div>

            <div class="stat-card bajo">
                <div class="stat-icon">⚠️</div>
                <div class="stat-info">
                    <span class="stat-number" id="productos-criticos">0</span>
                    <span class="stat-label">Stock Crítico</span>
                </div>
            </div>

            <div class="stat-card bajo">
                <div class="stat-icon">🟡</div>
                <div class="stat-info">
                    <span class="stat-number" id="productos-bajos">0</span>
                    <span class="stat-label">Stock Bajo</span>
                </div>
            </div>

            <div class="stat-card optimo">
                <div class="stat-icon">✅</div>
                <div class="stat-info">
                    <span class="stat-number" id="productos-optimos">0</span>
                    <span class="stat-label">Stock Óptimo</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">💰</div>
                <div class="stat-info">
                    <span class="stat-number" id="valor-inventario">$0</span>
                    <span class="stat-label">Valor Total</span>
                </div>
            </div>
        </div>

        <!-- Alertas del Sistema -->
        <div id="alertas-container" class="alertas-container">
            <!-- Las alertas se generan dinámicamente -->
        </div>

        <!-- Contenedor Principal del Inventario -->
        <div id="inventario-container" class="inventario-container">
            <!-- El inventario se carga dinámicamente por JavaScript -->
        </div>

        <!-- Mensajes del Sistema -->
        <div id="mensaje-sistema" class="mensaje-sistema"></div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>Cafetería Cesde</h4>
                <p>El mejor café para estudiantes y profesionales</p>
            </div>
            <div class="footer-section">
                <h4>Contacto</h4>
                <p>📞 Soporte: 3008694578</p>
                <p>📧 Email: equipocesde25@gmail.com</p>
            </div>
            <div class="footer-section">
                <h4>Horarios</h4>
                <p>Lunes a Viernes: 7:00 AM - 8:00 PM</p>
                <p>Sábados: 8:00 AM - 6:00 PM</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Equipo Cesde. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script src="js/inventario.js"></script>
    <script src="js/navigation.js"></script>
</body>
</html>